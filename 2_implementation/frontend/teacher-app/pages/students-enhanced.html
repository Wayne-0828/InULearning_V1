<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¸ç”Ÿåˆ†æ - InULearning æ•™å¸«æ§åˆ¶å°</title>
    <meta name="description" content="InULearning æ•™å¸«æ§åˆ¶å°ï¼šæ·±å…¥åˆ†æç­ç´šå­¸ç¿’ç‹€æ³ï¼Œè¿½è¹¤å­¸ç”Ÿé€²åº¦ï¼Œå„ªåŒ–æ•™å­¸ç­–ç•¥ã€‚">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-gray-100">
    <div class="flex h-screen bg-white">
        <!-- å´é‚Šæ¬„ -->
        <aside class="w-64 bg-blue-800 text-white flex flex-col">
            <a class="block" href="../index.html">
                <div class="flex items-center justify-center p-6 hover:bg-blue-700">
                    <div class="w-24 h-24 rounded-full bg-blue-600 flex items-center justify-center">
                        <span class="material-icons text-3xl">school</span>
                    </div>
                </div>
                <div class="px-6 pb-4 hover:bg-blue-700">
                    <h1 class="text-xl font-bold text-center">InU Learning</h1>
                    <p class="text-sm text-center">ã€å› ä½ è€Œå­¸ã€‘</p>
                </div>
            </a>
            <nav class="flex-1 px-4 py-4 space-y-2">
                <a class="flex items-center px-4 py-2 text-gray-100 hover:bg-blue-700 rounded-lg" href="../index.html">
                    <span class="material-icons">dashboard</span>
                    <span class="ml-3">æ•™å¸«æ§åˆ¶å°</span>
                </a>
                <a class="flex items-center px-4 py-2 text-gray-100 hover:bg-blue-700 rounded-lg" href="classes-enhanced.html">
                    <span class="material-icons">class</span>
                    <span class="ml-3">ç­ç´šç®¡ç†</span>
                </a>
                <a class="flex items-center px-4 py-2 text-gray-100 bg-blue-700 rounded-lg" href="students-enhanced.html">
                    <span class="material-icons">analytics</span>
                    <span class="ml-3">å­¸ç”Ÿåˆ†æ</span>
                </a>
                <a class="flex items-center px-4 py-2 text-gray-100 hover:bg-blue-700 rounded-lg" href="assignments-enhanced.html">
                    <span class="material-icons">assignment</span>
                    <span class="ml-3">ä½œæ¥­ç®¡ç†</span>
                </a>
                <a class="flex items-center px-4 py-2 text-gray-100 hover:bg-blue-700 rounded-lg" href="questions-enhanced.html">
                    <span class="material-icons">quiz</span>
                    <span class="ml-3">é¡Œåº«ç®¡ç†</span>
                </a>
                <a class="flex items-center px-4 py-2 text-gray-100 hover:bg-blue-700 rounded-lg" href="grades-enhanced.html">
                    <span class="material-icons">analytics</span>
                    <span class="ml-3">æˆç¸¾ç®¡ç†</span>
                </a>
                <a class="flex items-center px-4 py-2 text-gray-100 hover:bg-blue-700 rounded-lg" href="analytics-enhanced.html">
                    <span class="material-icons">analytics</span>
                    <span class="ml-3">å­¸ç¿’åˆ†æ</span>
                </a>
            </nav>
            <div class="p-4 border-t border-blue-700">
                <button id="logoutBtn" class="w-full flex items-center px-4 py-2 text-gray-100 hover:bg-blue-700 rounded-lg">
                    <span class="material-icons">logout</span>
                    <span class="ml-3">ç™»å‡º</span>
                </button>
            </div>
        </aside>

        <!-- ä¸»è¦å…§å®¹å€åŸŸ -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- é ‚éƒ¨å°èˆªå€ - ç­ç´šé¸æ“‡å™¨ + å¿«é€Ÿçµ±è¨ˆ -->
            <header class="bg-white border-b border-gray-200">
                <!-- ç­ç´šé¸æ“‡å™¨ -->
                <div class="px-6 py-4 border-b border-gray-100">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <h1 class="text-2xl font-bold text-gray-800">ğŸ“Š å­¸ç”Ÿå­¸ç¿’åˆ†æ</h1>
                            <div class="flex items-center space-x-4">
                                <label for="classSelector" class="text-sm font-medium text-gray-700">é¸æ“‡ç­ç´š:</label>
                                <select id="classSelector" class="form-control min-w-[200px]">
                                    <option value="">è«‹é¸æ“‡ç­ç´š...</option>
                                </select>
                                <button id="refreshBtn" class="btn btn-primary btn-sm">
                                    <span class="material-icons text-sm mr-2">refresh</span>
                                    é‡æ–°æ•´ç†
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div id="userInfo" class="hidden flex items-center space-x-2">
                                <span class="text-sm text-gray-600">æ­¡è¿ï¼Œ</span>
                                <span id="userName" class="text-sm font-medium text-blue-600">ç‹è€å¸«</span>
                                <button id="logoutBtn" class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition-colors">
                                    ç™»å‡º
                                </button>
                            </div>
                            <div id="authButtons">
                                <a class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors" href="http://localhost/login.html">ç™»å…¥</a>
                                <a class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors" href="register.html">è¨»å†Š</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- å¿«é€Ÿçµ±è¨ˆå€ -->
                <div id="quickStats" class="hidden px-6 py-4">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="flex items-center p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                <span class="material-icons text-2xl">people</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-blue-600">å­¸ç”Ÿç¸½æ•¸</p>
                                <p id="quickTotalStudents" class="text-2xl font-bold text-blue-800">0</p>
                            </div>
                        </div>
                        <div class="flex items-center p-4 bg-green-50 rounded-lg border border-green-200">
                            <div class="p-3 rounded-full bg-green-100 text-green-600">
                                <span class="material-icons text-2xl">trending_up</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-green-600">å¹³å‡é€²åº¦</p>
                                <p id="quickAvgProgress" class="text-2xl font-bold text-green-800">0%</p>
                            </div>
                        </div>
                        <div class="flex items-center p-4 bg-purple-50 rounded-lg border border-purple-200">
                            <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                                <span class="material-icons text-2xl">star</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-purple-600">å„ªç§€å­¸ç”Ÿ</p>
                                <p id="quickExcellentStudents" class="text-2xl font-bold text-purple-800">0</p>
                            </div>
                        </div>
                        <div class="flex items-center p-4 bg-orange-50 rounded-lg border border-orange-200">
                            <div class="p-3 rounded-full bg-orange-100 text-orange-600">
                                <span class="material-icons text-2xl">warning</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-orange-600">éœ€é—œæ³¨</p>
                                <p id="quickNeedAttention" class="text-2xl font-bold text-orange-800">0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- ä¸»è¦å…§å®¹ -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100">
                <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
                <div id="loadingIndicator" class="hidden flex items-center justify-center py-12">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
                    <span class="ml-3 text-gray-600">è¼‰å…¥ä¸­...</span>
                </div>

                <!-- ç­ç´šæ¦‚è¦½å€åŸŸ - æ•´é«”å­¸ç¿’æŒ‡æ¨™ + è¶¨å‹¢åœ–è¡¨ -->
                <div id="classOverviewSection" class="hidden">
                    <div class="container mx-auto px-6 py-8">
                        <!-- ç­ç´šçµ±è¨ˆå¡ç‰‡ -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="card">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                        <span class="material-icons text-2xl">people</span>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">å­¸ç”Ÿç¸½æ•¸</p>
                                        <p id="totalStudents" class="text-2xl font-bold text-gray-900">0</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-green-100 text-green-600">
                                        <span class="material-icons text-2xl">check_circle</span>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">å¹³å‡æ­£ç¢ºç‡</p>
                                        <p id="averageAccuracy" class="text-2xl font-bold text-gray-900">0%</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                                        <span class="material-icons text-2xl">speed</span>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">å¹³å‡ç­”é¡Œé€Ÿåº¦</p>
                                        <p id="averageSpeed" class="text-2xl font-bold text-gray-900">0 ç§’/é¡Œ</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-orange-100 text-orange-600">
                                        <span class="material-icons text-2xl">school</span>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">ç¸½å­¸ç¿’æœƒè©±</p>
                                        <p id="totalSessions" class="text-2xl font-bold text-gray-900">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç­ç´šåˆ†æåœ–è¡¨ -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                            <!-- ç­ç´šå­¸ç¿’è¶¨å‹¢ -->
                            <div class="card">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“ˆ ç­ç´šå­¸ç¿’è¶¨å‹¢</h3>
                                <div class="h-64">
                                    <canvas id="classTrendChart"></canvas>
                                </div>
                            </div>

                            <!-- ç§‘ç›®è¡¨ç¾åˆ†å¸ƒ -->
                            <div class="card">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“š ç§‘ç›®è¡¨ç¾åˆ†å¸ƒ</h3>
                                <div class="h-64">
                                    <canvas id="subjectDistributionChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- ç­ç´šå¼±é»åˆ†æ -->
                        <div class="card mb-8">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ¯ ç­ç´šçŸ¥è­˜é»å¼±é»åˆ†æ</h3>
                            <div id="classWeaknessAnalysis" class="space-y-4">
                                <div class="text-gray-500 text-center py-8">
                                    <span class="material-icons text-4xl text-gray-300 mb-2">info</span>
                                    <p>é¸æ“‡ç­ç´šå¾Œå°‡é¡¯ç¤ºå¼±é»åˆ†æ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å­¸ç”Ÿåˆ—è¡¨å€åŸŸ - å­¸ç”Ÿå¡ç‰‡ + ç¯©é¸æ’åº -->
                <div id="studentListSection" class="hidden">
                    <div class="flex">
                        <!-- ä¸»è¦å…§å®¹å€ -->
                        <div class="flex-1 px-6 py-8">
                            <!-- å­¸ç”Ÿç¯©é¸å’Œæ’åº -->
                            <div class="card mb-6">
                                <div class="flex flex-col sm:flex-row gap-4 items-center justify-between">
                                    <div class="flex-1 max-w-md">
                                        <div class="relative">
                                            <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                                <span class="material-icons text-gray-400">search</span>
                                            </span>
                                            <input type="text" id="studentSearchInput" placeholder="æœå°‹å­¸ç”Ÿå§“å..." 
                                                   class="form-control pl-10">
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <select id="sortBy" class="form-control">
                                            <option value="name">æŒ‰å§“åæ’åº</option>
                                            <option value="accuracy">æŒ‰æ­£ç¢ºç‡æ’åº</option>
                                            <option value="speed">æŒ‰ç­”é¡Œé€Ÿåº¦æ’åº</option>
                                            <option value="sessions">æŒ‰å­¸ç¿’æœƒè©±æ•¸æ’åº</option>
                                            <option value="progress">æŒ‰å­¸ç¿’é€²åº¦æ’åº</option>
                                        </select>
                                        <button id="sortOrder" class="btn btn-outline btn-sm">
                                            <span class="material-icons">arrow_upward</span>
                                        </button>
                                        <button id="viewToggleBtn" class="btn btn-primary btn-sm">
                                            <span class="material-icons mr-2">view_list</span>
                                            åˆ‡æ›è¦–åœ–
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- å­¸ç”Ÿç¶²æ ¼è¦–åœ– -->
                            <div id="studentGridView" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8">
                                <!-- å­¸ç”Ÿå¡ç‰‡å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                            </div>

                            <!-- å­¸ç”Ÿåˆ—è¡¨è¦–åœ– -->
                            <div id="studentListView" class="hidden">
                                <div class="card">
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å­¸ç”Ÿ</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ­£ç¢ºç‡</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç­”é¡Œé€Ÿåº¦</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å­¸ç¿’æœƒè©±</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æœ€è¿‘æ´»å‹•</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ“ä½œ</th>
                                                </tr>
                                            </thead>
                                            <tbody id="studentTableBody" class="bg-white divide-y divide-gray-200">
                                                <!-- å­¸ç”Ÿè¡Œå°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- åˆ†é å°èˆª -->
                            <div id="pagination" class="flex items-center justify-between">
                                <div class="text-sm text-gray-700">
                                    é¡¯ç¤º <span id="startIndex">0</span> åˆ° <span id="endIndex">0</span> é …ï¼Œå…± <span id="totalCount">0</span> é …
                                </div>
                                <div class="flex space-x-2">
                                    <button id="prevPage" class="btn btn-outline btn-sm">
                                        <span class="material-icons text-sm">chevron_left</span>
                                    </button>
                                    <div id="pageNumbers" class="flex space-x-1">
                                        <!-- é ç¢¼å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                                    </div>
                                    <button id="nextPage" class="btn btn-outline btn-sm">
                                        <span class="material-icons text-sm">chevron_right</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- å´é‚Šåˆ†æå€ - å¼±é»åˆ†æ + å»ºè­°æ”¹é€² -->
                        <div class="w-80 bg-white border-l border-gray-200 p-6">
                            <div class="sticky top-6">
                                <h3 class="text-lg font-semibold text-gray-800 mb-6">ğŸ“Š å³æ™‚åˆ†æ</h3>
                                
                                <!-- å­¸ç”Ÿè¡¨ç¾æ’å -->
                                <div class="card mb-6">
                                    <h4 class="font-medium text-gray-800 mb-4">ğŸ† å­¸ç”Ÿè¡¨ç¾æ’å</h4>
                                    <div id="studentRanking" class="space-y-3">
                                        <div class="text-gray-500 text-center py-4">
                                            <span class="material-icons text-2xl text-gray-300 mb-2">emoji_events</span>
                                            <p class="text-sm">é¸æ“‡ç­ç´šå¾Œé¡¯ç¤ºæ’å</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- å­¸ç¿’å»ºè­° -->
                                <div class="card mb-6">
                                    <h4 class="font-medium text-gray-800 mb-4">ğŸ’¡ å­¸ç¿’å»ºè­°</h4>
                                    <div id="learningSuggestions" class="space-y-3">
                                        <div class="text-gray-500 text-center py-4">
                                            <span class="material-icons text-2xl text-gray-300 mb-2">lightbulb</span>
                                            <p class="text-sm">æ ¹æ“šæ•¸æ“šç”Ÿæˆå»ºè­°</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- æœ€è¿‘æ´»å‹• -->
                                <div class="card">
                                    <h4 class="font-medium text-gray-800 mb-4">ğŸ•’ æœ€è¿‘æ´»å‹•</h4>
                                    <div id="recentActivities" class="space-y-3">
                                        <div class="text-gray-500 text-center py-4">
                                            <span class="material-icons text-2xl text-gray-300 mb-2">schedule</span>
                                            <p class="text-sm">é¡¯ç¤ºæœ€æ–°å­¸ç¿’è¨˜éŒ„</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å­¸ç”Ÿè©³æƒ…å€åŸŸ - å€‹äººå­¸ç¿’æª”æ¡ˆ + è©³ç´°åœ–è¡¨ -->
                <div id="studentDetailSection" class="hidden">
                    <div class="container mx-auto px-6 py-8">
                        <!-- å­¸ç”ŸåŸºæœ¬è³‡è¨Š -->
                        <div class="card mb-6">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center">
                                        <span class="material-icons text-blue-600 text-2xl">person</span>
                                    </div>
                                    <div>
                                        <h2 id="studentDetailName" class="text-2xl font-bold text-gray-800">å­¸ç”Ÿå§“å</h2>
                                        <p id="studentDetailClass" class="text-gray-600">ç­ç´šåç¨±</p>
                                    </div>
                                </div>
                                <button id="backToListBtn" class="btn btn-outline">
                                    <span class="material-icons mr-2">arrow_back</span>
                                    è¿”å›åˆ—è¡¨
                                </button>
                            </div>
                        </div>

                        <!-- å­¸ç”Ÿå­¸ç¿’æŒ‡æ¨™ -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="card">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-blue-600" id="studentAccuracy">0%</div>
                                    <div class="text-sm text-gray-600">æ­£ç¢ºç‡</div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-green-600" id="studentSpeed">0</div>
                                    <div class="text-sm text-gray-600">ç§’/é¡Œ</div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-purple-600" id="studentSessions">0</div>
                                    <div class="text-sm text-gray-600">å­¸ç¿’æœƒè©±</div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-orange-600" id="studentQuestions">0</div>
                                    <div class="text-sm text-gray-600">ç·´ç¿’é¡Œæ•¸</div>
                                </div>
                            </div>
                        </div>

                        <!-- å­¸ç”Ÿè©³ç´°åœ–è¡¨ -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                            <!-- å€‹äººå­¸ç¿’è¶¨å‹¢ -->
                            <div class="card">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“ˆ å€‹äººå­¸ç¿’è¶¨å‹¢</h3>
                                <div class="h-64">
                                    <canvas id="studentTrendChart"></canvas>
                                </div>
                            </div>

                            <!-- çŸ¥è­˜é»æŒæ¡åº¦ -->
                            <div class="card">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ¯ çŸ¥è­˜é»æŒæ¡åº¦</h3>
                                <div class="h-64">
                                    <canvas id="knowledgePointChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- å­¸ç¿’è¨˜éŒ„ -->
                        <div class="card">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“š æœ€è¿‘å­¸ç¿’è¨˜éŒ„</h3>
                            <div id="learningRecords" class="space-y-3">
                                <div class="text-gray-500 text-center py-8">
                                    <span class="material-icons text-4xl text-gray-300 mb-2">schedule</span>
                                    <p>è¼‰å…¥å­¸ç¿’è¨˜éŒ„ä¸­...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç„¡æ•¸æ“šç‹€æ…‹ -->
                <div id="noDataState" class="hidden text-center py-12">
                    <span class="material-icons text-6xl text-gray-300 mb-4">analytics_off</span>
                    <h3 class="text-lg font-medium text-gray-900 mb-2">å°šç„¡ç­ç´šæ•¸æ“š</h3>
                    <p class="text-gray-500">è«‹å…ˆé¸æ“‡ç­ç´šæˆ–å‰µå»ºç­ç´šä¾†æŸ¥çœ‹å­¸ç¿’åˆ†æ</p>
                </div>

                <!-- éŒ¯èª¤ç‹€æ…‹ -->
                <div id="errorState" class="hidden text-center py-12">
                    <span class="material-icons text-6xl text-red-300 mb-4">error_outline</span>
                    <h3 class="text-lg font-medium text-gray-900 mb-2">è¼‰å…¥å¤±æ•—</h3>
                    <p id="errorMessage" class="text-gray-500 mb-4">ç„¡æ³•è¼‰å…¥ç­ç´šæ•¸æ“š</p>
                    <button id="retryBtn" class="btn btn-primary">
                        é‡è©¦
                    </button>
                </div>
            </main>
        </div>
    </div>

    <!-- JavaScript æª”æ¡ˆè¼‰å…¥ -->
    <script src="../js/auth.js"></script>
    <script src="../js/api-client.js"></script>
    <script src="../js/students-enhanced.js"></script>
    
    <script>
        // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ å­¸ç”Ÿåˆ†æé é¢è¼‰å…¥å®Œæˆ');
            
            // å¼·åˆ¶æ›´æ–°èªè­‰ç‹€æ…‹å’Œæ­¡è¿è¨Šæ¯
            if (typeof teacherAuth !== 'undefined') {
                console.log('âœ… æ‰¾åˆ°èªè­‰ç®¡ç†å™¨ï¼Œæ›´æ–° UI');
                teacherAuth.updateUI();
                
                // æª¢æŸ¥èªè­‰ç‹€æ…‹
                if (teacherAuth.isLoggedIn()) {
                    console.log('âœ… ç”¨æˆ¶å·²ç™»å…¥ï¼Œé¡¯ç¤ºç”¨æˆ¶è³‡è¨Š');
                    const user = teacherAuth.getCurrentUser();
                    console.log('ç”¨æˆ¶è³‡è¨Š:', user);
                } else {
                    console.log('âŒ ç”¨æˆ¶æœªç™»å…¥');
                }
            } else {
                console.log('âŒ èªè­‰ç®¡ç†å™¨æœªæ‰¾åˆ°');
            }
            
            // å»¶é²åˆå§‹åŒ–å­¸ç”Ÿåˆ†æç®¡ç†å™¨ï¼Œç¢ºä¿èªè­‰ç‹€æ…‹å·²æ›´æ–°
            setTimeout(() => {
                // åˆå§‹åŒ–å­¸ç”Ÿåˆ†æç®¡ç†å™¨
                if (typeof StudentsAnalysisManager !== 'undefined') {
                    try {
                        window.studentsManager = new StudentsAnalysisManager();
                        console.log('âœ… å­¸ç”Ÿåˆ†æç®¡ç†å™¨åˆå§‹åŒ–æˆåŠŸ');
                    } catch (error) {
                        console.error('âŒ å­¸ç”Ÿåˆ†æç®¡ç†å™¨åˆå§‹åŒ–å¤±æ•—:', error);
                    }
                } else {
                    console.error('âŒ StudentsAnalysisManager é¡æœªå®šç¾©');
                }
            }, 100);
            
            // ç™»å‡ºåŠŸèƒ½
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                    if (typeof teacherAuth !== 'undefined') {
                        teacherAuth.logout();
                    } else {
                        alert('å·²ç™»å‡º');
                    }
                }
            });
        });
    </script>
</body>
</html>