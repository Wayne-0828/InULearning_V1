<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸»é é¢æ•´åˆæ¸¬è©¦ - InULearning</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-section { margin: 20px 0; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #007bff; }
        .warning { color: #ffc107; }
        .btn { padding: 8px 16px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; background: #007bff; color: white; }
        .btn:hover { background: #0056b3; }
        .log { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 10px; margin: 10px 0; font-family: monospace; }
    </style>
</head>
<body>
    <h1>ğŸ”— ä¸»é é¢æ•´åˆæ¸¬è©¦</h1>
    
    <div class="test-section">
        <h2>ğŸ“Š æ¸¬è©¦æ§åˆ¶å°</h2>
        <button class="btn" onclick="testMainPage()">æ¸¬è©¦ä¸»é é¢</button>
        <button class="btn" onclick="testStudentsPage()">æ¸¬è©¦å­¸ç”Ÿåˆ†æé é¢</button>
        <button class="btn" onclick="testNavigation()">æ¸¬è©¦å°èˆªé€£çµ</button>
        <button class="btn" onclick="clearLogs()">æ¸…é™¤æ—¥èªŒ</button>
    </div>

    <div class="test-section">
        <h2>ğŸ“ æ¸¬è©¦æ—¥èªŒ</h2>
        <div id="testLogs"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ”— å¿«é€Ÿé€£çµ</h2>
        <a href="index.html" class="btn" target="_blank">ä¸»é é¢</a>
        <a href="pages/students-enhanced.html" class="btn" target="_blank">å­¸ç”Ÿåˆ†æé é¢</a>
        <a href="debug.html" class="btn" target="_blank">èª¿è©¦é é¢</a>
    </div>

    <script>
        const testLogs = document.getElementById('testLogs');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logDiv = document.createElement('div');
            logDiv.className = `log ${type}`;
            logDiv.innerHTML = `<strong>[${timestamp}]</strong> ${message}`;
            testLogs.appendChild(logDiv);
            console.log(`[${timestamp}] ${message}`);
        }

        function clearLogs() {
            testLogs.innerHTML = '';
            log('æ—¥èªŒå·²æ¸…é™¤', 'info');
        }

        // æ¸¬è©¦ä¸»é é¢
        function testMainPage() {
            log('ğŸ§ª é–‹å§‹æ¸¬è©¦ä¸»é é¢...', 'info');
            
            fetch('index.html')
                .then(response => {
                    if (response.ok) {
                        log('âœ… ä¸»é é¢å¯ä»¥æ­£å¸¸è¨ªå•', 'success');
                        return response.text();
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                })
                .then(html => {
                    // æª¢æŸ¥æ˜¯å¦åŒ…å«å¿…è¦çš„å°èˆªé€£çµ
                    if (html.includes('students-enhanced.html')) {
                        log('âœ… ä¸»é é¢åŒ…å«å­¸ç”Ÿåˆ†æå°èˆªé€£çµ', 'success');
                    } else {
                        log('âŒ ä¸»é é¢ç¼ºå°‘å­¸ç”Ÿåˆ†æå°èˆªé€£çµ', 'error');
                    }
                    
                    // æª¢æŸ¥æ˜¯å¦åŒ…å«å¿…è¦çš„æ¨£å¼æ–‡ä»¶
                    if (html.includes('css/main.css')) {
                        log('âœ… ä¸»é é¢åŒ…å«ä¸»è¦æ¨£å¼æ–‡ä»¶', 'success');
                    } else {
                        log('âŒ ä¸»é é¢ç¼ºå°‘ä¸»è¦æ¨£å¼æ–‡ä»¶', 'error');
                    }
                })
                .catch(error => {
                    log(`âŒ ä¸»é é¢æ¸¬è©¦å¤±æ•—: ${error.message}`, 'error');
                });
        }

        // æ¸¬è©¦å­¸ç”Ÿåˆ†æé é¢
        function testStudentsPage() {
            log('ğŸ§ª é–‹å§‹æ¸¬è©¦å­¸ç”Ÿåˆ†æé é¢...', 'info');
            
            fetch('pages/students-enhanced.html')
                .then(response => {
                    if (response.ok) {
                        log('âœ… å­¸ç”Ÿåˆ†æé é¢å¯ä»¥æ­£å¸¸è¨ªå•', 'success');
                        return response.text();
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                })
                .then(html => {
                    // æª¢æŸ¥æ˜¯å¦åŒ…å«å¿…è¦çš„å…ƒç´ 
                    const requiredElements = [
                        'classSelector',
                        'refreshBtn',
                        'loadingIndicator',
                        'classOverviewContent',
                        'studentListContent'
                    ];
                    
                    let foundCount = 0;
                    requiredElements.forEach(id => {
                        if (html.includes(`id="${id}"`)) {
                            log(`âœ… æ‰¾åˆ°å…ƒç´ : ${id}`, 'success');
                            foundCount++;
                        } else {
                            log(`âŒ ç¼ºå°‘å…ƒç´ : ${id}`, 'error');
                        }
                    });
                    
                    if (foundCount === requiredElements.length) {
                        log(`ğŸ‰ æ‰€æœ‰ ${foundCount} å€‹å¿…è¦å…ƒç´ éƒ½å·²æ‰¾åˆ°ï¼`, 'success');
                    } else {
                        log(`âš ï¸ åªæ‰¾åˆ° ${foundCount}/${requiredElements.length} å€‹å¿…è¦å…ƒç´ `, 'warning');
                    }
                    
                    // æª¢æŸ¥æ˜¯å¦åŒ…å« JavaScript æ–‡ä»¶
                    if (html.includes('students-enhanced.js')) {
                        log('âœ… é é¢åŒ…å«å­¸ç”Ÿåˆ†æ JavaScript æ–‡ä»¶', 'success');
                    } else {
                        log('âŒ é é¢ç¼ºå°‘å­¸ç”Ÿåˆ†æ JavaScript æ–‡ä»¶', 'error');
                    }
                })
                .catch(error => {
                    log(`âŒ å­¸ç”Ÿåˆ†æé é¢æ¸¬è©¦å¤±æ•—: ${error.message}`, 'error');
                });
        }

        // æ¸¬è©¦å°èˆªé€£çµ
        function testNavigation() {
            log('ğŸ§ª é–‹å§‹æ¸¬è©¦å°èˆªé€£çµ...', 'info');
            
            // æ¸¬è©¦å¾ä¸»é é¢åˆ°å­¸ç”Ÿåˆ†æé é¢çš„å°èˆª
            log('ğŸ”— æ¸¬è©¦å°èˆªé€£çµ: index.html â†’ students-enhanced.html', 'info');
            
            // æª¢æŸ¥å°èˆªé€£çµæ˜¯å¦æ­£ç¢º
            const navigationTest = {
                'ä¸»é é¢': 'index.html',
                'å­¸ç”Ÿåˆ†æ': 'pages/students-enhanced.html',
                'ç­ç´šç®¡ç†': 'pages/classes-enhanced.html',
                'ä½œæ¥­ç®¡ç†': 'pages/assignments-enhanced.html'
            };
            
            Object.entries(navigationTest).forEach(([name, path]) => {
                fetch(path)
                    .then(response => {
                        if (response.ok) {
                            log(`âœ… ${name} é é¢å¯ä»¥æ­£å¸¸è¨ªå•`, 'success');
                        } else {
                            log(`âŒ ${name} é é¢è¨ªå•å¤±æ•—: HTTP ${response.status}`, 'error');
                        }
                    })
                    .catch(error => {
                        log(`âŒ ${name} é é¢æ¸¬è©¦å¤±æ•—: ${error.message}`, 'error');
                    });
            });
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            log('ğŸš€ æ¸¬è©¦é é¢è¼‰å…¥å®Œæˆ', 'success');
            log('ğŸ’¡ é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ¸¬è©¦...', 'info');
        });
    </script>
</body>
</html>
