# ğŸ“‹ InULearning åŠŸèƒ½æ¸¬è©¦æŒ‡å—

## ğŸ”§ æ¸¬è©¦ç’°å¢ƒæº–å‚™

### 1. æª¢æŸ¥æœå‹™ç‹€æ…‹
```bash
# æª¢æŸ¥æ‰€æœ‰æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œ
docker compose ps

# æ‡‰è©²çœ‹åˆ°ä»¥ä¸‹æœå‹™éƒ½æ˜¯ Up ç‹€æ…‹ï¼š
# - inulearning_auth_service (å¥åº·)
# - inulearning_learning_service (å¥åº·)  
# - inulearning_question_bank_service (å¯èƒ½ä¸å¥åº·ï¼Œä½†èƒ½æ­£å¸¸å·¥ä½œ)
# - inulearning_postgres (å¥åº·)
# - inulearning_mongodb (å¥åº·)
# - inulearning_redis (å¥åº·)
# - inulearning_minio (å¥åº·)
```

### 2. å•Ÿå‹•ç¼ºå¤±çš„æœå‹™ï¼ˆå¦‚æœéœ€è¦ï¼‰
```bash
# å¦‚æœä»»ä½•æœå‹™æ²’æœ‰é‹è¡Œï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å•Ÿå‹•
docker compose up -d

# æª¢æŸ¥ç‰¹å®šæœå‹™æ—¥èªŒ
docker logs inulearning_auth_service --tail 10
docker logs inulearning_learning_service --tail 10
docker logs inulearning_question_bank_service --tail 10
```

---

## ğŸ¥‡ ç¬¬ä¸€å„ªå…ˆç´šåŠŸèƒ½æ¸¬è©¦ï¼šæ ¸å¿ƒå­¸ç¿’æµç¨‹

### æ¸¬è©¦ 1: å­¸ç¿’ç³»çµ±èˆ‡é¡Œåº«æ•´åˆ

#### 1.1 é¡Œåº«æœå‹™åŸºæœ¬åŠŸèƒ½
```bash
# æ¸¬è©¦é¡Œåº«å¥åº·æª¢æŸ¥
curl "http://localhost:8002/health"

# æ¸¬è©¦æœç´¢API
curl "http://localhost:8002/api/v1/questions/search?subject=æ•¸å­¸&limit=3" | python3 -m json.tool

# æ¸¬è©¦éš¨æ©Ÿå‡ºé¡ŒAPI
curl "http://localhost:8002/api/v1/questions/random?count=2" | python3 -m json.tool
```

**é æœŸçµæœ**:
- å¥åº·æª¢æŸ¥è¿”å› `{"status": "healthy"}`
- æœç´¢APIè¿”å›åŒ…å« `items`, `total`, `page` ç­‰å­—æ®µçš„åˆ†é æ•¸æ“š
- éš¨æ©ŸAPIè¿”å›é¡Œç›®æ•¸çµ„ï¼Œæ¯å€‹é¡Œç›®åŒ…å« `id`, `question`, `options`, `answer` ç­‰å­—æ®µ

#### 1.2 å­¸ç¿’æœå‹™å¥åº·æª¢æŸ¥
```bash
# æ¸¬è©¦å­¸ç¿’æœå‹™å¥åº·æª¢æŸ¥
curl "http://localhost:8003/health"
```

**é æœŸçµæœ**: è¿”å›å¥åº·ç‹€æ…‹ä¿¡æ¯

### æ¸¬è©¦ 2: è‡ªå‹•æ‰¹æ”¹å¼•æ“

#### 2.1 é‹è¡Œå®Œæ•´å­¸ç¿’æµç¨‹æ¸¬è©¦
```bash
# é‹è¡Œç«¯åˆ°ç«¯å­¸ç¿’æµç¨‹æ¸¬è©¦
python3 test_learning_flow.py
```

**é æœŸçµæœ**:
```
ğŸš€ é–‹å§‹å®Œæ•´å­¸ç¿’æµç¨‹æ¸¬è©¦
============================================================
ğŸ” è·³éç”¨æˆ¶ç™»å…¥ï¼Œå°ˆæ³¨æ¸¬è©¦æ ¸å¿ƒå­¸ç¿’åŠŸèƒ½...

ğŸ“š æ¸¬è©¦é¡Œç›®ç²å–...
âœ… æˆåŠŸç²å– X é“é¡Œç›®
ğŸ“‹ é¡Œç›®ç¤ºä¾‹:
   1. [é¡Œç›®å…§å®¹]...
      é¸é …: ['A', 'B', 'C', 'D']
      æ­£ç¢ºç­”æ¡ˆ: [ç­”æ¡ˆ]

ğŸ¤– æ¸¬è©¦è‡ªå‹•æ‰¹æ”¹åŠŸèƒ½...
   é¡Œç›® 1: å­¸ç”Ÿç­”æ¡ˆ X | æ­£ç¢ºç­”æ¡ˆ X | âœ… æ­£ç¢º/âŒ éŒ¯èª¤ | å¾—åˆ†: X
   é¡Œç›® 2: å­¸ç”Ÿç­”æ¡ˆ X | æ­£ç¢ºç­”æ¡ˆ X | âœ… æ­£ç¢º/âŒ éŒ¯èª¤ | å¾—åˆ†: X

ğŸ“Š æ‰¹æ”¹çµæœçµ±è¨ˆ:
   ç¸½åˆ†: X/Y
   æ­£ç¢ºç‡: X% (X/Y)

ğŸ’¾ æ¸¬è©¦è¨˜éŒ„å„²å­˜åŠŸèƒ½...
âœ… å­¸ç¿’æœƒè©±è¨˜éŒ„:
   æœƒè©±ID: [UUID]
   ç¸½åˆ†: X
   ç”¨æ™‚: X ç§’
âœ… è©³ç´°ç­”é¡Œè¨˜éŒ„:
   è¨˜éŒ„ 1: [è¨˜éŒ„è©³æƒ…]
âœ… æˆåŠŸæ¨¡æ“¬å„²å­˜ X æ¢å­¸ç¿’è¨˜éŒ„

============================================================
ğŸ‰ å®Œæ•´å­¸ç¿’æµç¨‹æ¸¬è©¦å®Œæˆï¼
```

### æ¸¬è©¦ 3: å­¸ç¿’ç³»çµ±æ•´åˆæ¸¬è©¦

#### 3.1 é‹è¡Œå­¸ç¿’ç³»çµ±æ•´åˆæ¸¬è©¦
```bash
# é‹è¡Œå­¸ç¿’ç³»çµ±èˆ‡é¡Œåº«æ•´åˆæ¸¬è©¦
python3 test_learning_integration.py
```

**é æœŸçµæœ**:
```
ğŸš€ é–‹å§‹å­¸ç¿’æœå‹™èˆ‡é¡Œåº«æœå‹™æ•´åˆæ¸¬è©¦
==================================================
ğŸ” æ¸¬è©¦å­¸ç¿’æœå‹™èˆ‡é¡Œåº«æœå‹™æ•´åˆ...

1. æ¸¬è©¦é¡Œåº«æœå‹™ç›´æ¥èª¿ç”¨:
âœ… æœç´¢APIæ­£å¸¸: æ‰¾åˆ° X é“é¡Œç›®
   è¿”å›å­—æ®µ: ['items', 'total', 'page', 'page_size', 'total_pages']
âœ… éš¨æ©Ÿå‡ºé¡ŒAPIæ­£å¸¸: è¿”å› X é“é¡Œç›®
   é¡Œç›®å­—æ®µ: [å­—æ®µåˆ—è¡¨]

2. æ¸¬è©¦å­¸ç¿’æœå‹™çš„é¡Œåº«å®¢æˆ¶ç«¯:
âš ï¸  å­¸ç¿’æœå‹™APIéœ€è¦èªè­‰ï¼Œè·³éç›´æ¥æ¸¬è©¦
   ä½†é¡Œåº«å®¢æˆ¶ç«¯çš„é…ç½®å·²æ›´æ–°:
   - æœå‹™åœ°å€: http://localhost:8002 âœ…
   - æœç´¢APIè¿”å›å­—æ®µ: items âœ…
   - éš¨æ©ŸAPIè¿”å›æ ¼å¼: ç›´æ¥æ•¸çµ„ âœ…

3. æ¸¬è©¦æ•¸æ“šè½‰æ›å…¼å®¹æ€§:
âœ… é¡Œç›®æ•¸æ“šæ ¼å¼æª¢æŸ¥:
   âœ… id: <class 'str'>
   âœ… question: <class 'str'>
   âœ… options: <class 'dict'>
   âœ… answer: <class 'str'>
   âœ… difficulty: <class 'str'>
âœ… æ‰€æœ‰å¿…éœ€å­—æ®µéƒ½å­˜åœ¨
âœ… é¸é …æ ¼å¼æ­£ç¢º (å­—å…¸): ['A', 'B', 'C', 'D']

==================================================
âœ… æ•´åˆæ¸¬è©¦å®Œæˆ
```

---

## ğŸ¥ˆ ç¬¬äºŒå„ªå…ˆç´šåŠŸèƒ½æ¸¬è©¦ï¼šæ¬Šé™èˆ‡å„€è¡¨æ¿åŠŸèƒ½

### æ¸¬è©¦ 4: é—œä¿‚ç®¡ç†åŠŸèƒ½

#### 4.1 é‹è¡Œé—œä¿‚ç®¡ç†æ¸¬è©¦
```bash
# é‹è¡Œå®Œæ•´çš„é—œä¿‚ç®¡ç†åŠŸèƒ½æ¸¬è©¦
python3 test_relationships.py
```

**é æœŸçµæœ**:
```
ğŸš€ é–‹å§‹é—œä¿‚ç®¡ç†åŠŸèƒ½æ¸¬è©¦
============================================================
ğŸ” parentç”¨æˆ¶ç™»å…¥...
âœ… parentç™»å…¥æˆåŠŸ
ğŸ” teacherç”¨æˆ¶ç™»å…¥...
âœ… teacherç™»å…¥æˆåŠŸ
ğŸ” adminç”¨æˆ¶ç™»å…¥...
âœ… adminç™»å…¥æˆåŠŸ

ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ æ¸¬è©¦å®¶é•·-å­¸ç”Ÿé—œä¿‚ç®¡ç†...
âœ… å®¶é•·å·²æœ‰ X å€‹å­å¥³é—œä¿‚:
   - å­å¥³: å­¸ç”Ÿ 01è™Ÿ (ID: 3)
   - å­å¥³: å­¸ç”Ÿ 02è™Ÿ (ID: 4)

ğŸ‘¨â€ğŸ« æ¸¬è©¦æ•™å¸«-ç­ç´šé—œä¿‚ç®¡ç†...
âœ… æ•™å¸«å·²æœ‰ X å€‹æ•™å­¸é—œä¿‚:
   - ç­ç´š: 7Aç­ | ç§‘ç›®: æ•¸å­¸
   - ç­ç´š: 7Bç­ | ç§‘ç›®: æ•¸å­¸
âœ… ç³»çµ±ä¸­æœ‰ X å€‹ç­ç´š:
   - 7Aç­ (7A) - 2024-2025
   - 7Bç­ (7B) - 2024-2025
   - 8Aç­ (8A) - 2024-2025
   - 8Bç­ (8B) - 2024-2025

ğŸ‘‘ æ¸¬è©¦ç®¡ç†å“¡ç­ç´šç®¡ç†...
âœ… æˆåŠŸå‰µå»ºç­ç´š: 9Aç­

ğŸ”’ æ¸¬è©¦æ¬Šé™æ§åˆ¶...
ğŸ” studentç”¨æˆ¶ç™»å…¥...
âœ… studentç™»å…¥æˆåŠŸ
âœ… æ¬Šé™æ§åˆ¶æ­£å¸¸ï¼šå­¸ç”Ÿç„¡æ³•è¨ªå•å®¶é•·åŠŸèƒ½

ğŸ“Š æ¸¬è©¦å­¸ç¿’è¨˜éŒ„æŸ¥è©¢API...
âš ï¸  å­¸ç¿’è¨˜éŒ„APIå°‡åœ¨å­¸ç¿’æœå‹™ä¸­å¯¦ç¾
   - å®¶é•·æŸ¥è©¢å­å¥³å­¸ç¿’è¨˜éŒ„
   - æ•™å¸«æŸ¥è©¢ç­ç´šå­¸ç”Ÿè¨˜éŒ„
   - çµ±è¨ˆæ•¸æ“šï¼šæ­£ç¢ºç‡ã€å­¸ç¿’æ™‚é•·ã€é€²åº¦ç­‰

============================================================
ğŸ‰ é—œä¿‚ç®¡ç†åŠŸèƒ½æ¸¬è©¦å®Œæˆï¼

ğŸ“ˆ æ¸¬è©¦çµæœç¸½çµ:
   âœ… å®¶é•·-å­¸ç”Ÿé—œä¿‚ç®¡ç†: å¯æŸ¥è©¢ç¾æœ‰é—œä¿‚
   âœ… æ•™å¸«-ç­ç´šé—œä¿‚ç®¡ç†: å¯æŸ¥è©¢æ•™å­¸é—œä¿‚å’Œç­ç´šåˆ—è¡¨
   âœ… ç®¡ç†å“¡ç­ç´šç®¡ç†: å¯å‰µå»ºå’Œç®¡ç†ç­ç´š
   âœ… æ¬Šé™æ§åˆ¶: æ­£ç¢ºé™åˆ¶ä¸åŒè§’è‰²çš„è¨ªå•æ¬Šé™
   âš ï¸  å­¸ç¿’è¨˜éŒ„API: å¾…å¯¦ç¾ï¼ˆä¸‹ä¸€éšæ®µï¼‰
```

### æ¸¬è©¦ 5: å­¸ç¿’è¨˜éŒ„æŸ¥è©¢API

#### 5.1 æ‰‹å‹•æ¸¬è©¦å­¸ç¿’è¨˜éŒ„API

é¦–å…ˆç²å–èªè­‰tokenï¼š
```bash
# å®¶é•·ç™»å…¥ç²å–token
curl -X POST "http://localhost:8001/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email": "parent01@test.com", "password": "password123"}'

# å°‡è¿”å›çš„ access_token ä¿å­˜ï¼Œç”¨æ–¼å¾ŒçºŒè«‹æ±‚
```

ç„¶å¾Œæ¸¬è©¦å­¸ç¿’è¨˜éŒ„æŸ¥è©¢ï¼š
```bash
# æ›¿æ› YOUR_TOKEN ç‚ºå¯¦éš›çš„ access_token
export PARENT_TOKEN="YOUR_TOKEN"

# æ¸¬è©¦å®¶é•·æŸ¥è©¢å­å¥³å­¸ç¿’è¨˜éŒ„
curl -H "Authorization: Bearer $PARENT_TOKEN" \
  "http://localhost:8003/api/v1/learning/records/parent/children?limit=5"

# æ¸¬è©¦å®¶é•·æŸ¥è©¢å­å¥³å­¸ç¿’çµ±è¨ˆ
curl -H "Authorization: Bearer $PARENT_TOKEN" \
  "http://localhost:8003/api/v1/learning/records/parent/statistics?days=30"
```

**é æœŸçµæœ**:
- å­¸ç¿’è¨˜éŒ„æŸ¥è©¢è¿”å›å­¸ç¿’æœƒè©±æ•¸çµ„ï¼ˆå¯èƒ½ç‚ºç©ºï¼Œå› ç‚ºæ²’æœ‰å¯¦éš›å­¸ç¿’æ•¸æ“šï¼‰
- çµ±è¨ˆæŸ¥è©¢è¿”å›çµ±è¨ˆä¿¡æ¯çµæ§‹

#### 5.2 æ•™å¸«APIæ¸¬è©¦
```bash
# æ•™å¸«ç™»å…¥ç²å–token
curl -X POST "http://localhost:8001/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email": "teacher01@test.com", "password": "password123"}'

export TEACHER_TOKEN="YOUR_TEACHER_TOKEN"

# æ¸¬è©¦æ•™å¸«æŸ¥è©¢å­¸ç”Ÿå­¸ç¿’è¨˜éŒ„
curl -H "Authorization: Bearer $TEACHER_TOKEN" \
  "http://localhost:8003/api/v1/learning/records/teacher/students?subject=æ•¸å­¸&limit=5"
```

---

## ğŸ” æ‰‹å‹•APIæ¸¬è©¦æ­¥é©Ÿ

### æ¸¬è©¦ç”¨æˆ¶ä¿¡æ¯
ç³»çµ±ä¸­é è¨­çš„æ¸¬è©¦ç”¨æˆ¶ï¼š
- **å­¸ç”Ÿ**: `student01@test.com` / `password123`
- **å®¶é•·**: `parent01@test.com` / `password123` 
- **æ•™å¸«**: `teacher01@test.com` / `password123`
- **ç®¡ç†å“¡**: `admin01@test.com` / `password123`

### APIç«¯é»æ¸¬è©¦

#### èªè­‰æœå‹™ (ç«¯å£ 8001)
```bash
# å¥åº·æª¢æŸ¥
curl "http://localhost:8001/health"

# ç”¨æˆ¶ç™»å…¥
curl -X POST "http://localhost:8001/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email": "parent01@test.com", "password": "password123"}'

# æŸ¥è©¢è¦ªå­é—œä¿‚ï¼ˆéœ€è¦tokenï¼‰
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8001/api/v1/relationships/parent-child"

# æŸ¥è©¢ç­ç´šåˆ—è¡¨
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8001/api/v1/relationships/classes"
```

#### é¡Œåº«æœå‹™ (ç«¯å£ 8002)
```bash
# å¥åº·æª¢æŸ¥
curl "http://localhost:8002/health"

# æœç´¢é¡Œç›®
curl "http://localhost:8002/api/v1/questions/search?subject=æ•¸å­¸&limit=3"

# éš¨æ©Ÿé¡Œç›®
curl "http://localhost:8002/api/v1/questions/random?count=2"

# é¡Œç›®åˆ—è¡¨
curl "http://localhost:8002/api/v1/questions/?limit=3"
```

#### å­¸ç¿’æœå‹™ (ç«¯å£ 8003)
```bash
# å¥åº·æª¢æŸ¥
curl "http://localhost:8003/health"

# æŸ¥è©¢å­¸ç¿’è¨˜éŒ„ï¼ˆéœ€è¦å®¶é•·tokenï¼‰
curl -H "Authorization: Bearer YOUR_PARENT_TOKEN" \
  "http://localhost:8003/api/v1/learning/records/parent/children"

# æŸ¥è©¢å­¸ç¿’çµ±è¨ˆ
curl -H "Authorization: Bearer YOUR_PARENT_TOKEN" \
  "http://localhost:8003/api/v1/learning/records/parent/statistics"
```

---

## ğŸš¨ å¸¸è¦‹å•é¡Œæ’é™¤

### å•é¡Œ 1: æœå‹™ç„¡æ³•é€£æ¥
```bash
# æª¢æŸ¥æœå‹™ç‹€æ…‹
docker compose ps

# é‡å•Ÿç‰¹å®šæœå‹™
docker compose restart [service-name]

# æŸ¥çœ‹æœå‹™æ—¥èªŒ
docker logs [container-name] --tail 20
```

### å•é¡Œ 2: æ•¸æ“šåº«é€£æ¥å•é¡Œ
```bash
# æª¢æŸ¥PostgreSQL
docker exec -it inulearning_postgres psql -U aipe-tester -d inulearning -c "\dt"

# æª¢æŸ¥MongoDB
docker exec -it inulearning_mongodb mongosh --eval "db.adminCommand('listCollections')"
```

### å•é¡Œ 3: èªè­‰tokenå•é¡Œ
- ç¢ºä¿ä½¿ç”¨æ­£ç¢ºçš„emailæ ¼å¼ç™»å…¥
- tokenæœ‰30åˆ†é˜æœ‰æ•ˆæœŸï¼ŒéæœŸéœ€è¦é‡æ–°ç™»å…¥
- æª¢æŸ¥Authorization headeræ ¼å¼ï¼š`Bearer YOUR_TOKEN`

---

## âœ… æ¸¬è©¦å®Œæˆæª¢æŸ¥æ¸…å–®

### ç¬¬ä¸€å„ªå…ˆç´šåŠŸèƒ½
- [ ] é¡Œåº«æœå‹™å¥åº·æª¢æŸ¥é€šé
- [ ] é¡Œç›®æœç´¢å’Œéš¨æ©Ÿå‡ºé¡Œæ­£å¸¸
- [ ] å­¸ç¿’æµç¨‹æ¸¬è©¦è…³æœ¬åŸ·è¡ŒæˆåŠŸ
- [ ] è‡ªå‹•æ‰¹æ”¹é‚è¼¯æ­£ç¢º
- [ ] æ•¸æ“šè½‰æ›æ ¼å¼æ­£ç¢º

### ç¬¬äºŒå„ªå…ˆç´šåŠŸèƒ½  
- [ ] æ‰€æœ‰æ¸¬è©¦ç”¨æˆ¶èƒ½æ­£å¸¸ç™»å…¥
- [ ] å®¶é•·èƒ½æŸ¥è©¢å­å¥³é—œä¿‚
- [ ] æ•™å¸«èƒ½æŸ¥è©¢ç­ç´šé—œä¿‚
- [ ] ç®¡ç†å“¡èƒ½å‰µå»ºç­ç´š
- [ ] æ¬Šé™æ§åˆ¶æ­£å¸¸å·¥ä½œ
- [ ] å­¸ç¿’è¨˜éŒ„APIéŸ¿æ‡‰æ­£ç¢º

### ç³»çµ±æ•´é«”
- [ ] æ‰€æœ‰æœå‹™å¥åº·ç‹€æ…‹æ­£å¸¸
- [ ] è·¨æœå‹™APIèª¿ç”¨æ­£å¸¸
- [ ] æ•¸æ“šåº«æ•¸æ“šå®Œæ•´
- [ ] éŒ¯èª¤è™•ç†é©ç•¶

---

**è«‹æŒ‰ç…§ä»¥ä¸Šæ­¥é©Ÿé€²è¡Œæ¸¬è©¦ï¼Œå¦‚æœé‡åˆ°ä»»ä½•å•é¡Œæˆ–æ¸¬è©¦çµæœèˆ‡é æœŸä¸ç¬¦ï¼Œè«‹å‘Šè¨´æˆ‘å…·é«”çš„éŒ¯èª¤ä¿¡æ¯ã€‚æ¸¬è©¦å®Œæˆå¾Œï¼Œæˆ‘å°‡é–‹å§‹ç¬¬ä¸‰å„ªå…ˆç´šçš„é–‹ç™¼å·¥ä½œã€‚** 